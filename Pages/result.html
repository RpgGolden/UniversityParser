<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
     <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link href='second.css' rel='stylesheet' type='text/css'/>
    <link href="https://fonts.googleapis.com/css?family=Oswald" rel="stylesheet">
  </head>

  <body>

    <div class = "container">

      <table>
        <thead>
          <tr class = "name">
            <th colspan="4" id = "nick">
              <div class = "head">
    <h4>Владимиров Владимир Владимирович</h4>
    <h5>166-752-099-00</h5>
  </div>
    </th>
    </tr>
    </thead>

    <tbody>
      <tr class="first">
        <th class="line1">№</th>
        <th>Название университета</th>
        <th>Направление</th>
        <th>Форма обучения</th>
        <th class="line2">Согласие на зачисление</th>
        </tr>
        <div class ="content">
        <tr class="second">
          <td class="line1">1</td>
          <td  rowspan="4">ЮФУ</td>
          <td  rowspan="4">09.03.02 Информационные системы и технологии</td>
          <td rowspan="4">Очная</td>
          <td class="line2"></td>
          </tr>
        </div>
          </tbody>
          </table>
        </div>
    </body>
<script>
  async function requestData() {
    const currentPageSearchParams = new URLSearchParams(window.location.search)

    const snils = currentPageSearchParams.get('snils');

    if (!snils) {
      alert('No snils defined');

      window.location.assign('/snilsSearch');

      return;
    }

    const protocol = window.location.protocol;
    const host = window.location.host;
    const baseUrl = `${protocol}//${host}`;

    const requestUrl = new URL(`${baseUrl}/getResult`);

    requestUrl.searchParams.append('snils', snils)

    const response = await fetch(requestUrl);

    if (response.status !== 200) {
      alert('Backend is dead');
      return;
    }

    const resultJson = await response.json()

    // there is!
    console.log(resultJson)

  }
  requestData();
  </script>
    
    </html>
